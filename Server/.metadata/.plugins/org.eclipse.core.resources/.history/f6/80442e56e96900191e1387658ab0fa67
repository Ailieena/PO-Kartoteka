import java.rmi.Naming;
import java.util.Scanner;

public class EntryPointClient {

	public void run()
	{
		Scanner s = new Scanner(System.in);
        String login; 
        try
        { 
            // lookup method to find reference of remote object 
            EntryPoint access = 
                (EntryPoint)Naming.lookup("rmi://localhost:1900"+ 
                                      "/start"); 
            System.out.println("Podaj login: ");
            login = s.nextLine();
            String operation;
        	while(true)
        	{
        		System.out.println("PODAJ KOMENDÊ: ");
    	    	operation = s.nextLine();
    	    	if(operation.equals("CREATE"))
    	    	{
    	    		int id = access.create();
    	    		System.out.println("Twoja gra ma id : " + id);
    	    		Game game = (Game)Naming.lookup("rmi://localhost:1900"+ 
                            "/game"+id); 
    	    		DummyGameClient gameClient = new DummyGameClient(game, login);
    	    		gameClient.play();
    	    	}
    	    	else if(operation.equals("LIST"))
    	    	{
    	    		System.out.println(access.list(" "));
    	    	}
    	    	else if(operation.equals("JOIN"))
    	    	{
    	    		System.out.println("WYBIERZ Z POKOI: ");
    	    		System.out.println(access.list(" "));
    	    		int id = s.nextInt();
    	    		if(access.getGame(id))
	    	    	{
	    	    		Game game = (Game)Naming.lookup("rmi://localhost:1900"+ 
	    	                                          "/game"+id); 
	    	    		DummyGameClient gameClient = new DummyGameClient(game, login);
	    	    		gameClient.play();
    	    		}
    	    		else
    	    		{
    	    			System.out.println("gra nie istnieje");
    	    		}
    	    	}
    	    	else
    	    	{
    	    		System.out.println("niepoprawna komenda");
    	    	}
        	}
        } 
        catch(Exception ae) 
        { 
            System.out.println(ae); 
        } 
		
	}
	
}
